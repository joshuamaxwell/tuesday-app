var data=[{name:"loyolla osteen",bio:"McSweeney's roof party fashion axe locavore beard Thundercats. Whatever forage skateboard, squid fashion axe Portland Thundercats next level craft beer art party Carles you probably haven't heard of them cornhole +1. Retro iPhone craft beer, four loko artisan photo booth gluten-free dreamcatcher bicycle rights ugh cardigan ethical polaroid Williamsburg Thundercats. Deep v pickled salvia, distillery Intelligentsia Williamsburg keytar ethnic bitters cornhole banjo semiotics cliche Carles. Church-key Schlitz selfies, hoodie selvage pour-over Godard. Church-key locavore 3 wolf moon, Banksy keffiyeh kitsch before they sold out artisan Wes Anderson raw denim try-hard. Before they sold out PBR&B YOLO Godard trust fund chillwave.",phone:"555-4564",avatar:"http://postgradproblems.com/wp-content/uploads/2013/09/329993bbd5b835b0edb799e061cb0a9e.jpg"},{name:"sammy osteen",bio:"Odd Future irony messenger bag, post-ironic swag umami slow-carb Cosby sweater you probably haven't heard of them Brooklyn Austin. Typewriter High Life literally kale chips. Bushwick keytar art party Tonx lomo. Flexitarian fap flannel, Schlitz DIY narwhal PBR&B four loko chia forage. Seitan ethnic ennui slow-carb, flannel Godard meggings swag YOLO trust fund mlkshk jean shorts American Apparel skateboard. Marfa church-key hella letterpress freegan, photo booth wolf Schlitz leggings cornhole chambray Tumblr brunch. Sustainable gluten-free hella, Blue Bottle hoodie church-key hashtag chambray slow-carb freegan beard direct trade butcher viral wolf.",phone:"555-1234",avatar:"http://derekberry.files.wordpress.com/2012/02/tumblr_ll3vsdbeey1qjgwr6o1_500.jpg"},{name:"chrystal osteen",bio:"Skateboard swag occupy, trust fund meh next level church-key. Tonx Austin cardigan leggings food truck. Tumblr roof party cornhole, keytar fanny pack seitan 8-bit disrupt photo booth Banksy paleo actually Portland. Locavore Intelligentsia cray, chambray Echo Park skateboard DIY drinking vinegar. Gluten-free vinyl irony, skateboard iPhone Terry Richardson PBR bicycle rights post-ironic hoodie bitters polaroid. Four loko fixie Vice, Neutra chia pour-over kogi church-key typewriter iPhone Carles irony selfies 3 wolf moon. Chia salvia banjo swag, blog cred leggings mustache hashtag.",phone:"555-7689",avatar:"http://hipsters.com/uploads/cache/pins/2012/09/5062ad577c13e-194x.jpg"},{name:"lizbeth osteen",bio:"Marfa XOXO single-origin coffee artisan hoodie. Photo booth yr meggings you probably haven't heard of them cornhole Echo Park. Selfies flexitarian banjo tattooed, High Life cred meggings. Gentrify synth Brooklyn forage asymmetrical Neutra, aesthetic yr. Literally seitan fanny pack brunch kogi PBR. Scenester try-hard stumptown, Blue Bottle whatever Truffaut +1 chillwave dreamcatcher next level quinoa mlkshk keytar slow-carb pug. Ennui asymmetrical letterpress, tattooed quinoa whatever stumptown ethnic chia Intelligentsia kale chips.",phone:"555-9876",avatar:"http://www.kevinsaysthings.com/wp-content/uploads/2011/10/glasses-girl.jpg"}],Contact=Backbone.Model.extend({defaults:{name:"",phone:"",avatar:"http://i.imgur.com/zGTAxgy.png%3F1",bio:""}}),ContactsCollection=Backbone.Collection.extend({model:Contact}),ListView=Backbone.View.extend({className:"list-item",renderTemplate:_.template($("#list-item-template").text()),initialize:function(){this.render(),$(".contacts-list").append(this.el),this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(this.renderTemplate(this.model.attributes))},events:{click:"showInMainView"},showInMainView:function(){new MainView({model:this.model})}}),MainView=Backbone.View.extend({renderTemplate:_.template($("#main-item-template").text()),className:"main-contact",initialize:function(){this.render(),$(".main-contact").replaceWith(this.el),this.listenTo(this.model,"change",this.render)},events:{"click .edit-btn":"editMe"},render:function(){this.$el.html(this.renderTemplate(this.model.attributes))},editMe:function(){$(".add-new-btn").attr({value:"CANCEL"}),new EditView({model:this.model}),$(".edit-panel").removeClass("collapse")}}),EditView=Backbone.View.extend({className:"edit-form",renderTemplate:_.template($("#edit-form-template").text()),initialize:function(){this.render(),$(".edit-panel").html(this.el),this.$el.find(".name").val(this.model.get("name")),this.$el.find(".phone").val(this.model.get("phone")),this.$el.find(".bio").val(this.model.get("bio"))},render:function(){this.$el.html(this.renderTemplate(this.model.attributes))},events:{"click .done-btn":"addNew"},addNew:function(){var a=this.$el.find(".name").val(),b=this.$el.find(".phone").val(),c=this.$el.find(".bio").val();this.model.set({name:a,phone:b,bio:c}),window.contacts.push([this.model]),this.$el.parent().toggleClass("collapse"),this.remove(),$(".add-new-btn").attr({value:"ADD"}),new ListView({model:this.model})}}),ContactsCollection=Backbone.Collection.extend({model:Contact});window.contacts=new ContactsCollection(data),contacts.each(function(a){new ListView({model:a})}),$(".add-new-btn").on("click",function(){_.contains($(".edit-panel").attr("class").split(" "),"collapse")===!0?($(".add-new-btn").attr({value:"CANCEL"}),0===$(".edit-panel").children().length&&new EditView({model:new Contact}),$(".edit-panel").removeClass("collapse")):_.contains($(".edit-panel").attr("class").split(" "),"collapse")===!1&&($(".edit-panel").addClass("collapse"),$(".add-new-btn").attr({value:"ADD"}))});